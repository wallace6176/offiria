(function(a){a(window).ready(function(){var f=a("#pageslide");var b=false,e;if(f.length==0){f=a("<div />").attr("id","pageslide").css("display","none").appendTo(a("body"))}function d(h,g){if(h.indexOf("#")===0){a(h).clone(true).appendTo(f.empty()).show()}else{if(g){var i=a("<iframe />").attr({src:h,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});f.html(i)}else{f.load(h)}f.data("localEl",false)}}function c(i,h){var k=f.outerWidth(true),j={},g={};if(f.is(":visible")||b){return}b=true;switch(i){case"left":f.css({left:"auto",right:"-"+k+"px"});j["margin-left"]="-="+k;g.right="+="+k;break;default:f.css({left:"-"+k+"px",right:"auto"});j["margin-left"]="+="+k;g.left="+="+k;break}f.show().animate(g,h,function(){b=false})}a.fn.pageslide=function(g){var h=this;h.click(function(j){var k=a(this),i=a.extend({href:k.attr("href")},g);j.preventDefault();j.stopPropagation();if(f.is(":visible")&&k[0]==e){a.pageslide.close()}else{a.pageslide(i);e=k[0]}})};a.fn.pageslide.defaults={speed:250,direction:"right",modal:false,iframe:true,href:null};a.pageslide=function(g){var h=a.extend({},a.fn.pageslide.defaults,g);if(f.is(":visible")&&f.data("direction")!=h.direction){a.pageslide.close(function(){d(h.href,h.iframe);c(h.direction,h.speed)})}else{d(h.href,h.iframe);if(f.is(":hidden")){c(h.direction,h.speed)}}f.data(h)};a.pageslide.close=function(l){var k=a("#pageslide"),j=k.outerWidth(true),h=k.data("speed"),i={},g={};if(k.is(":hidden")||b){return}b=true;switch(k.data("direction")){case"left":i["margin-left"]="+="+j;g.right="-="+j;break;default:i["margin-left"]="-="+j;g.left="-="+j;break}k.animate(g,h,function(){k.hide();b=false;if(typeof l!="undefined"){l()}})};f.click(function(g){g.stopPropagation()});a(document).bind("click keyup",function(g){if(g.type=="keyup"&&g.keyCode!=27){return}if(f.is(":visible")&&!f.data("modal")){a.pageslide.close()}})})})(jQuery);